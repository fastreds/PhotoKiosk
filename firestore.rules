rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Reglas para las colecciones 'photos' y 'frames':
    // Permite lectura y escritura a CUALQUIER persona, sin autenticación.
    match /photos/{document=**} {
      allow read, write: if true;
    }

    match /frames/{document=**} {
      allow read, write: if true;
    }

    // Reglas para la colección 'rules':
    // Permite lectura a CUALQUIER persona (sin autenticación).
    // Permite escritura (edición) SOLO a usuarios autenticados.
    match /rules/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Reglas para 'emailLogs' (NUEVO)
    // Permite acceso solo a usuarios autenticados (administradores)
    match /emailLogs/{document=**} {
      allow read, write: if request.auth != null;
    }

    // Por defecto, niega todo acceso a cualquier otra colección
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
