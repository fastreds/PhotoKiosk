<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Photo Kiosk</title>
    <link rel="stylesheet" href="vendor/sweetalert2.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="admin.css">
    <!-- Google Fonts for a premium look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>
    <div id="login-container" class="login-container">
        <div class="login-card">
            <h2>Iniciar Sesi√≥n</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Correo Electr√≥nico</label>
                    <input type="email" id="login-email" required placeholder="admin@ejemplo.com">
                </div>
                <div class="form-group">
                    <label for="login-password">Contrase√±a</label>
                    <input type="password" id="login-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="btn-main">Entrar</button>
                <p id="login-error" class="error-message"></p>
            </form>
        </div>
    </div>

    <div id="admin-layout" class="admin-layout" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>Photo Kiosk</h3>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-section="section-frames">
                    <span>üñºÔ∏è</span> Marcos
                </button>
                <button class="nav-item" data-section="section-gallery">
                    <span>üì∑</span> Galer√≠a
                </button>
                <button class="nav-item" data-section="section-settings">
                    <span>‚öôÔ∏è</span> Configuraci√≥n
                </button>
                <button class="nav-item" data-section="section-email">
                    <span>üìß</span> Correos
                </button>
            </nav>
            <div class="sidebar-footer">
                <div class="theme-switcher-sidebar">
                    <span>Modo Oscuro</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <button id="logout-btn" class="btn-logout">Cerrar Sesi√≥n</button>
                <a href="/" class="back-link-sidebar">Volver al Kiosco</a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Frame Management -->
            <section id="section-frames" class="content-section active">
                <div class="section-header">
                    <h2>Gesti√≥n de Marcos</h2>
                    <p>Sube y gestiona los marcos disponibles para las fotos.</p>
                </div>

                <div class="actions-bar">
                    <button id="upload-frame-btn" class="btn-primary">Subir Nuevo Marco</button>
                    <input type="file" id="frame-upload-input" accept="image/*" hidden>
                </div>
                <div id="frames-list" class="grid-container"></div>
            </section>

            <!-- Photo Gallery Maintenance -->
            <section id="section-gallery" class="content-section">
                <div class="section-header">
                    <h2>Galer√≠a de Fotos</h2>
                    <p>Gestiona las fotos capturadas.</p>
                </div>

                <div class="gallery-toolbar">
                    <div class="selection-controls">
                        <label class="checkbox-label">
                            <input type="checkbox" id="gallery-select-all">
                            Seleccionar Todo
                        </label>
                        <button id="gallery-delete-selected" class="btn-danger" disabled>Eliminar Seleccionados</button>
                    </div>
                    <div class="pagination-controls">
                        <button id="gallery-prev" class="btn-secondary" disabled>Anterior</button>
                        <span id="gallery-page-indicator">P√°gina 1</span>
                        <button id="gallery-next" class="btn-secondary">Siguiente</button>
                    </div>
                </div>

                <div id="photo-gallery-list" class="gallery-grid small-grid">
                    <!-- Photos will be loaded here -->
                </div>
            </section>

            <!-- Capture Settings -->
            <section id="section-settings" class="content-section">
                <div class="section-header">
                    <h2>Configuraci√≥n de Captura</h2>
                    <p>Ajusta los tiempos y l√≠mites del kiosco.</p>
                </div>
                <div class="settings-card">
                    <div class="setting-item">
                        <label for="countdown-duration">Cuenta Regresiva (segundos):</label>
                        <input type="number" id="countdown-duration" min="1" max="10">
                    </div>
                    <div class="setting-item">
                        <label for="photo-interval">Intervalo entre Fotos (segundos):</label>
                        <input type="number" id="photo-interval" min="1" max="5">
                    </div>
                    <div class="setting-item">
                        <label for="inactivity-timeout">Tiempo de Inactividad (segundos):</label>
                        <input type="number" id="inactivity-timeout" min="10" max="300" placeholder="60">
                    </div>
                    <div class="setting-item">
                        <label for="index-carousel-limit">L√≠mite Carrusel Inicio (fotos):</label>
                        <input type="number" id="index-carousel-limit" min="1" max="50" placeholder="10">
                    </div>
                    <button id="save-settings-btn" class="btn-main">Guardar Configuraci√≥n</button>
                </div>
            </section>

            <!-- Email Configuration -->
            <section id="section-email" class="content-section">
                <div class="section-header">
                    <h2>Configuraci√≥n de Correo</h2>
                    <p>Personaliza el correo que reciben los usuarios.</p>
                </div>

                <div class="settings-card">
                    <div class="setting-item">
                        <label>Nombre del Remitente:</label>
                        <input type="text" id="email-sender-name" placeholder="Photo Kiosk">
                    </div>
                    <div class="setting-item">
                        <label>Asunto del Correo:</label>
                        <input type="text" id="email-subject" placeholder="¬°Tu Foto!">
                    </div>
                    <div class="setting-item">
                        <label>Plantilla HTML (Usa {{photoUrl}} para la imagen):</label>
                        <textarea id="email-template" rows="5" class="code-input"></textarea>
                    </div>
                    <button id="save-email-config-btn" class="btn-main">Guardar Configuraci√≥n de Correo</button>
                </div>

                <div class="section-header" style="margin-top: 2rem;">
                    <h2>Registro de Correos</h2>
                </div>
                <div class="table-container">
                    <table id="email-logs-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Correo</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Logs will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <!-- Photo Preview Modal -->
    <div id="preview-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="preview-container">
                <div class="preview-image-wrapper">
                    <img id="preview-image" src="" alt="Vista Previa">
                </div>
                <div class="preview-info">
                    <h3>C√≥digo QR</h3>
                    <div id="preview-qr"></div>
                    <p>Escanea para descargar</p>
                </div>
            </div>
        </div>
    </div>

    <script src="vendor/sweetalert2.min.js"></script>
    <script type="module" src="admin.js"></script>
</body>

</html>